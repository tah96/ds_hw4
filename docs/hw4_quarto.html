<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Homework 4</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="fullcontent">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Homework 4</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="task-1---qa" class="level2">
<h2 class="anchored" data-anchor-id="task-1---qa">Task 1 - Q&amp;A</h2>
<ol type="1">
<li><p>If your working directory is myfolder/homework/, what relative path would you specify to get the file located at myfolder/MyData.csv?</p>
<blockquote class="blockquote">
<p>../MyData.csv</p>
</blockquote></li>
<li><p>What are the major benefits of using R projects?</p>
<blockquote class="blockquote">
<p>Some major benefits to using an R project include version control through git commands, consistent working directory and reproducability through centralized organization.</p>
</blockquote></li>
<li><p>What is git and what is github?</p>
<blockquote class="blockquote">
<p>Git is a version control software that can use a series of bash commands for interacting with a repository. Github is an online repository hosting platform where users can interact with the repository using git and other methods.</p>
</blockquote></li>
<li><p>What are the two main differences between a tibble and a data.frame?</p>
<blockquote class="blockquote">
<p>Tibbles utilize “fancy print” when printed, meaning the output looks cleaner compared to data frames and includes important details along with the first few records of the object. Tibbles, however, do not coerce down to a vector when you subset to only one column using “[ ]”</p>
</blockquote></li>
<li><p>Rewrite the following nested function call using BaseR’s chaining operator: arrange(filter(select(as_tibble(iris), starts_with(“Petal”), Species),Petal.Length &lt; 1.55), Species)</p>
<blockquote class="blockquote">
<p>as_tibble(iris) |&gt; select(starts_with(“Petal”),Species) |&gt; filter(Petal.Length &lt; 1.55) |&gt; arrange(Species)</p>
</blockquote></li>
</ol>
</section>
<section id="task-2-reading-delimited-data" class="level2">
<h2 class="anchored" data-anchor-id="task-2-reading-delimited-data">Task 2: Reading Delimited Data</h2>
</section>
<section id="glass-data" class="level1">
<h1>Glass Data</h1>
<p>We are using the tidyverse library to read in the CSV at the URL. No headers are provided in the CSV, so we are creating our column names using CamelCase.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"tidyverse"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidyverse' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'ggplot2' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidyr' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'readr' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'purrr' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'stringr' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'forcats' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'lubridate' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.0.10     ✔ readr     2.1.4 
✔ forcats   1.0.0      ✔ stringr   1.5.0 
✔ ggplot2   3.4.4      ✔ tibble    3.1.8 
✔ lubridate 1.9.2      ✔ tidyr     1.3.0 
✔ purrr     1.0.1      
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>glass <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://www4.stat.ncsu.edu/online/datasets/glass.data"</span>,<span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">'Id'</span>,<span class="st">'RI'</span>,<span class="st">'Na'</span>,<span class="st">'Mg'</span>,<span class="st">'Al'</span>,<span class="st">'Si'</span>,<span class="st">'K'</span>,<span class="st">'Ca'</span>,<span class="st">'Ba'</span>,<span class="st">'Fe'</span>,<span class="st">'TypeOfGlass'</span>),<span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>glass</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 214 × 11
      Id    RI    Na    Mg    Al    Si     K    Ca    Ba    Fe TypeOfGlass
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;       &lt;dbl&gt;
 1     1  1.52  13.6  4.49  1.1   71.8  0.06  8.75     0  0              1
 2     2  1.52  13.9  3.6   1.36  72.7  0.48  7.83     0  0              1
 3     3  1.52  13.5  3.55  1.54  73.0  0.39  7.78     0  0              1
 4     4  1.52  13.2  3.69  1.29  72.6  0.57  8.22     0  0              1
 5     5  1.52  13.3  3.62  1.24  73.1  0.55  8.07     0  0              1
 6     6  1.52  12.8  3.61  1.62  73.0  0.64  8.07     0  0.26           1
 7     7  1.52  13.3  3.6   1.14  73.1  0.58  8.17     0  0              1
 8     8  1.52  13.2  3.61  1.05  73.2  0.57  8.24     0  0              1
 9     9  1.52  14.0  3.58  1.37  72.1  0.56  8.3      0  0              1
10    10  1.52  13    3.6   1.36  73.0  0.57  8.4      0  0.11           1
# ℹ 204 more rows</code></pre>
</div>
</div>
<p>Now we’re going to transform the data using the tidyverse and chaining. The transformations are: 1. Overwrite TypeOfGlass variable by mapping integers to string values 2. Filter where Fe (Iron) is less than 0.2 AND Type Of Glass is tableware or headlamps</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>glass <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TypeOfGlass =</span> <span class="fu">factor</span>(TypeOfGlass, <span class="at">levels =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>,<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"building_windows_float_processed"</span>, <span class="st">"building_windows_non_float_processed"</span>, <span class="st">"vehicle_windows_float_processed"</span>, <span class="st">"vehicle_windows_non_float_processed"</span>,<span class="st">"containers"</span>,<span class="st">"tableware"</span>,<span class="st">"headlamps"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Fe <span class="sc">&lt;</span> <span class="fl">0.2</span> <span class="sc">&amp;</span> TypeOfGlass <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'tableware'</span>,<span class="st">'headlamps'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 38 × 11
      Id    RI    Na    Mg    Al    Si     K    Ca    Ba    Fe TypeOfGlass
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;      
 1   177  1.52  14    2.39  1.56  72.4  0     9.57  0        0 tableware  
 2   178  1.52  13.8  2.41  1.19  72.8  0     9.77  0        0 tableware  
 3   179  1.52  14.5  2.24  1.62  72.4  0     9.26  0        0 tableware  
 4   180  1.52  14.1  2.19  1.66  72.7  0     9.32  0        0 tableware  
 5   181  1.51  14.4  1.74  1.54  74.6  0     7.59  0        0 tableware  
 6   182  1.52  15.0  0.78  1.74  72.5  0     9.95  0        0 tableware  
 7   183  1.52  14.2  0     2.09  72.7  0    10.9   0        0 tableware  
 8   184  1.52  14.6  0     0.56  73.5  0    11.2   0        0 tableware  
 9   185  1.51  17.4  0     0.34  75.4  0     6.65  0        0 tableware  
10   186  1.51  13.7  3.2   1.81  72.8  1.76  5.43  1.19     0 headlamps  
# ℹ 28 more rows</code></pre>
</div>
</div>
</section>
<section id="yeast-data" class="level1">
<h1>Yeast Data</h1>
<p>The Yeast Data is a fixed_width delimited file. Lets read it in and account for widths</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>yeast <span class="ot">&lt;-</span> <span class="fu">read_fwf</span>(<span class="at">file=</span><span class="st">"https://www4.stat.ncsu.edu/online/datasets/yeast.data"</span>,<span class="fu">fwf_widths</span>(<span class="fu">c</span>(<span class="dv">12</span>,<span class="dv">6</span>,<span class="dv">6</span>,<span class="dv">6</span>,<span class="dv">6</span>,<span class="dv">6</span>,<span class="dv">6</span>,<span class="dv">6</span>,<span class="dv">6</span>,<span class="dv">6</span>),<span class="fu">c</span>(<span class="st">'SeqName'</span>,<span class="st">'Mcg'</span>,<span class="st">'Gvh'</span>,<span class="st">'Alm'</span>,<span class="st">'Mit'</span>,<span class="st">'Erl'</span>,<span class="st">'Pox'</span>,<span class="st">'Vac'</span>,<span class="st">'Nuc'</span>,<span class="st">'Class'</span>)),<span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we’re going to transform the data using the tidyverse and chaining. The transformations are: 1. Remove SeqName and Nuc columns 2. Groups by “Class” and then creates new columns representing mean and median of our original numeric variables</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>yeast <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="st">'SeqName'</span>,<span class="st">'Nuc'</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Class) <span class="sc">%&gt;%</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric),<span class="at">.fns=</span><span class="fu">list</span>(<span class="at">mean=</span>mean,<span class="at">median=</span>median),<span class="at">.names=</span><span class="st">'Class_{.col}_{.fn}'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,484 × 22
# Groups:   Class [10]
     Mcg   Gvh   Alm   Mit   Erl   Pox   Vac Class Class_Mcg_mean
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;
 1  0.58  0.61  0.47  0.13   0.5   0    0.48 MIT            0.521
 2  0.43  0.67  0.48  0.27   0.5   0    0.53 MIT            0.521
 3  0.64  0.62  0.49  0.15   0.5   0    0.53 MIT            0.521
 4  0.58  0.44  0.57  0.13   0.5   0    0.54 NUC            0.452
 5  0.42  0.44  0.48  0.54   0.5   0    0.48 MIT            0.521
 6  0.51  0.4   0.56  0.17   0.5   0.5  0.49 CYT            0.481
 7  0.5   0.54  0.48  0.65   0.5   0    0.53 MIT            0.521
 8  0.48  0.45  0.59  0.2    0.5   0    0.58 NUC            0.452
 9  0.55  0.5   0.66  0.36   0.5   0    0.49 MIT            0.521
10  0.4   0.39  0.6   0.15   0.5   0    0.58 CYT            0.481
# ℹ 1,474 more rows
# ℹ 13 more variables: Class_Mcg_median &lt;dbl&gt;, Class_Gvh_mean &lt;dbl&gt;,
#   Class_Gvh_median &lt;dbl&gt;, Class_Alm_mean &lt;dbl&gt;, Class_Alm_median &lt;dbl&gt;,
#   Class_Mit_mean &lt;dbl&gt;, Class_Mit_median &lt;dbl&gt;, Class_Erl_mean &lt;dbl&gt;,
#   Class_Erl_median &lt;dbl&gt;, Class_Pox_mean &lt;dbl&gt;, Class_Pox_median &lt;dbl&gt;,
#   Class_Vac_mean &lt;dbl&gt;, Class_Vac_median &lt;dbl&gt;</code></pre>
</div>
</div>
<section id="task-3-reading-excel-data" class="level2">
<h2 class="anchored" data-anchor-id="task-3-reading-excel-data">Task 3: Reading Excel Data</h2>
<p>We will read in the White Wine data form our “files” folder and print out as a tibble</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>white_wine <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="at">path=</span><span class="st">'files/white-wine.xlsx'</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>white_wine</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4,898 × 12
   `fixed acidity` `volatile acidity` `citric acid` `residual sugar` chlorides
             &lt;dbl&gt;              &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;     &lt;dbl&gt;
 1               7               0.27          0.36             20.7     0.045
 2              63               0.3           0.34              1.6     0.049
 3              81               0.28          0.4               6.9     0.05 
 4              72               0.23          0.32              8.5     0.058
 5              72               0.23          0.32              8.5     0.058
 6              81               0.28          0.4               6.9     0.05 
 7              62               0.32          0.16              7       0.045
 8               7               0.27          0.36             20.7     0.045
 9              63               0.3           0.34              1.6     0.049
10              81               0.22          0.43              1.5     0.044
# ℹ 4,888 more rows
# ℹ 7 more variables: `free sulfur dioxide` &lt;dbl&gt;,
#   `total sulfur dioxide` &lt;dbl&gt;, density &lt;dbl&gt;, pH &lt;dbl&gt;, sulphates &lt;dbl&gt;,
#   alcohol &lt;dbl&gt;, quality &lt;dbl&gt;</code></pre>
</div>
</div>
<p>We will fetch the variable names from the second sheet of the file. We will then assign those variable names to the first sheet (already read in).</p>
<p>We will print out the Wine tibble again to make sure this worked.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>variable_names <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="at">path=</span><span class="st">'files/white-wine.xlsx'</span>,<span class="at">sheet=</span><span class="dv">2</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(white_wine) <span class="ot">&lt;-</span> <span class="fu">pull</span>(variable_names,<span class="st">"Variables"</span>)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>white_wine</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4,898 × 12
   fixed_acidity volatile_acidity citric_acid residual_sugar chlorides
           &lt;dbl&gt;            &lt;dbl&gt;       &lt;dbl&gt;          &lt;dbl&gt;     &lt;dbl&gt;
 1             7             0.27        0.36           20.7     0.045
 2            63             0.3         0.34            1.6     0.049
 3            81             0.28        0.4             6.9     0.05 
 4            72             0.23        0.32            8.5     0.058
 5            72             0.23        0.32            8.5     0.058
 6            81             0.28        0.4             6.9     0.05 
 7            62             0.32        0.16            7       0.045
 8             7             0.27        0.36           20.7     0.045
 9            63             0.3         0.34            1.6     0.049
10            81             0.22        0.43            1.5     0.044
# ℹ 4,888 more rows
# ℹ 7 more variables: free_sulfur_dioxide &lt;dbl&gt;, total_sulfur_dioxide &lt;dbl&gt;,
#   density &lt;dbl&gt;, pH &lt;dbl&gt;, sulphates &lt;dbl&gt;, alcohol &lt;dbl&gt;, quality &lt;dbl&gt;</code></pre>
</div>
</div>
<p>We’ll also add a “color” column to our White tibble. This will be white for all values in this tibble.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>white_wine<span class="sc">$</span>wine_type <span class="ot">&lt;-</span> <span class="st">"white"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Lets now read in the red white data, making sure our col_types match that of the white wine data set. We can do this using the map_chr function from the purrr library. We are also excluding the last column “color” since this is not included in the raw red wine data.</p>
<p>We will also go ahead and add the appropriate color and rename the columns like we did with the white wine data.</p>
<p>We will print out the final tibble</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>red_wine <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_delim</span>(<span class="at">file=</span><span class="st">'https://www4.stat.ncsu.edu/~online/datasets/red-wine.csv'</span>,<span class="at">delim=</span><span class="st">";"</span>,<span class="at">col_types=</span><span class="fu">head</span>(<span class="fu">map_chr</span>(white_wine,typeof),<span class="sc">-</span><span class="dv">1</span>),<span class="at">show_col_types=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The following named parsers don't match the column names:
fixed_acidity, volatile_acidity, citric_acid, residual_sugar,
free_sulfur_dioxide, total_sulfur_dioxide</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(red_wine) <span class="ot">&lt;-</span> <span class="fu">head</span>(<span class="fu">colnames</span>(white_wine),<span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>red_wine<span class="sc">$</span>wine_type <span class="ot">=</span> <span class="st">"red"</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>red_wine</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,599 × 13
   fixed_acidity volatile_acidity citric_acid residual_sugar chlorides
           &lt;dbl&gt;            &lt;dbl&gt;       &lt;dbl&gt;          &lt;dbl&gt;     &lt;dbl&gt;
 1           7.4             0.7         0               1.9     0.076
 2           7.8             0.88        0               2.6     0.098
 3           7.8             0.76        0.04            2.3     0.092
 4          11.2             0.28        0.56            1.9     0.075
 5           7.4             0.7         0               1.9     0.076
 6           7.4             0.66        0               1.8     0.075
 7           7.9             0.6         0.06            1.6     0.069
 8           7.3             0.65        0               1.2     0.065
 9           7.8             0.58        0.02            2       0.073
10           7.5             0.5         0.36            6.1     0.071
# ℹ 1,589 more rows
# ℹ 8 more variables: free_sulfur_dioxide &lt;dbl&gt;, total_sulfur_dioxide &lt;dbl&gt;,
#   density &lt;dbl&gt;, pH &lt;dbl&gt;, sulphates &lt;dbl&gt;, alcohol &lt;dbl&gt;, quality &lt;dbl&gt;,
#   wine_type &lt;chr&gt;</code></pre>
</div>
</div>
<p>Now to combine (union) or two tibbles into one!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>wine <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(white_wine,red_wine)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>wine</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,497 × 13
   fixed_acidity volatile_acidity citric_acid residual_sugar chlorides
           &lt;dbl&gt;            &lt;dbl&gt;       &lt;dbl&gt;          &lt;dbl&gt;     &lt;dbl&gt;
 1             7             0.27        0.36           20.7     0.045
 2            63             0.3         0.34            1.6     0.049
 3            81             0.28        0.4             6.9     0.05 
 4            72             0.23        0.32            8.5     0.058
 5            72             0.23        0.32            8.5     0.058
 6            81             0.28        0.4             6.9     0.05 
 7            62             0.32        0.16            7       0.045
 8             7             0.27        0.36           20.7     0.045
 9            63             0.3         0.34            1.6     0.049
10            81             0.22        0.43            1.5     0.044
# ℹ 6,487 more rows
# ℹ 8 more variables: free_sulfur_dioxide &lt;dbl&gt;, total_sulfur_dioxide &lt;dbl&gt;,
#   density &lt;dbl&gt;, pH &lt;dbl&gt;, sulphates &lt;dbl&gt;, alcohol &lt;dbl&gt;, quality &lt;dbl&gt;,
#   wine_type &lt;chr&gt;</code></pre>
</div>
</div>
<p>Now lets apply a chain of functions to the data. The chain includes: 1. Filter the data to only look at high-quality wines (quality &gt; 6.5) and wines that have a reasonable alcohol value (alcohol &lt; 132). 2. Sort the data from highest quality to lowest. 3. Select only the variables that contain acid, the alcohol variable, the type variable, and the quality variable. 4. Add the mean and standard deviation of the alcohol variable to the data set for each setting of the quality variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>wine <span class="sc">%&gt;%</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(quality <span class="sc">&gt;</span> <span class="fl">6.5</span> <span class="sc">&amp;</span> alcohol <span class="sc">&lt;</span> <span class="dv">132</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(quality)) <span class="sc">%&gt;%</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"acid"</span>),alcohol,quality,wine_type) <span class="sc">%&gt;%</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(quality) <span class="sc">%&gt;%</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(alcohol,<span class="at">.fns=</span><span class="fu">list</span>(<span class="at">mean=</span>mean,<span class="at">sd=</span>sd),<span class="at">.names=</span><span class="st">"quality_level_{.col}_{.fn}"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,206 × 8
# Groups:   quality [3]
   fixed_acidity volatile_acidity citric_acid alcohol quality wine_type
           &lt;dbl&gt;            &lt;dbl&gt;       &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;    
 1            91             0.27        0.45     104       9 white    
 2            66             0.36        0.29     124       9 white    
 3            74             0.24        0.36     125       9 white    
 4            69             0.36        0.34     127       9 white    
 5            71             0.26        0.49     129       9 white    
 6            62             0.66        0.48     128       8 white    
 7            62             0.66        0.48     128       8 white    
 8            68             0.26        0.42     105       8 white    
 9            67             0.23        0.31     107       8 white    
10            67             0.23        0.31     107       8 white    
# ℹ 1,196 more rows
# ℹ 2 more variables: quality_level_alcohol_mean &lt;dbl&gt;,
#   quality_level_alcohol_sd &lt;dbl&gt;</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>